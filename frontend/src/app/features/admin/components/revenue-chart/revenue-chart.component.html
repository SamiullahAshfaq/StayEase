<mat-card class="admin-chart-container">
  <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
    <div>
      <h3 class="text-xl font-semibold" style="color: var(--admin-text-primary)">
        Revenue Analytics
      </h3>
      <p class="text-sm" style="color: var(--admin-text-secondary)">
        Daily revenue trends and payment breakdown
      </p>
    </div>
    <mat-button-toggle-group (change)="loadChart()">
      <mat-button-toggle value="7">7 Days</mat-button-toggle>
      <mat-button-toggle value="30">30 Days</mat-button-toggle>
      <mat-button-toggle value="90">90 Days</mat-button-toggle>
    </mat-button-toggle-group>
  </div>

  @if (loading()) {
    <div class="flex justify-center items-center h-96">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2"
           style="border-color: var(--admin-primary)"></div>
    </div>
  } @else if (chartOption()) {
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- Line Chart -->
      <div class="lg:col-span-2">
        <div echarts [options]="chartOption()!" class="h-96"></div>
      </div>

      <!-- Payment Methods Pie Chart -->
      <div>
        <h4 class="text-sm font-semibold mb-3" style="color: var(--admin-text-primary)">
          Payment Methods
        </h4>
        @if (pieChartOption()) {
          <div echarts [options]="pieChartOption()!" class="h-96"></div>
        }
      </div>
    </div>
  }
</mat-card>
