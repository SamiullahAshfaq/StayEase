<header class="navbar">
  <div class="navbar-container">
    <!-- Logo -->
    <a routerLink="/" class="logo-link">
      <svg class="logo-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
      </svg>
      <span class="logo-text">StayEase</span>
    </a>

    <!-- Search Bar -->
    <div class="search-bar">
      <button class="search-button" routerLink="/listing/search">Anywhere</button>
      <div class="search-divider"></div>
      <button class="search-button" routerLink="/listing/search">Any week</button>
      <div class="search-divider"></div>
      <button class="search-button" routerLink="/listing/search">
        Add guests
        <span class="search-icon-wrapper">
          <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
        </span>
      </button>
    </div>

    <!-- Navigation Actions -->
    <nav class="nav-actions">
      @if (isLandlord() || isAdmin()) {
        <a routerLink="/profile/my-listings" class="host-link">
          Manage Listings
        </a>
      }
      @if (!isAuthenticated()) {
        <a routerLink="/profile/my-listings" class="host-link">
          Become a Host
        </a>
      }

      <button class="globe-button" type="button">
        <svg class="globe-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
        </svg>
      </button>

      <!-- User Menu -->
      <div class="user-menu-wrapper">
        <button class="user-menu-button" (click)="toggleUserMenu()">
          <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6h16M4 12h16M4 18h16" />
          </svg>

          @if (currentUser$ | async; as user) {
            <div class="user-avatar">
              {{ user.name.charAt(0).toUpperCase() || 'U' }}
            </div>
          } @else {
            <svg class="user-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
            </svg>
          }
        </button>

        <!-- Dropdown Menu -->
        <div class="dropdown-menu" [class.show]="showUserMenu">
          @if (currentUser$ | async; as user) {
            <a routerLink="/profile/view" (click)="showUserMenu = false">
              <div class="font-semibold">Profile</div>
            </a>
            <a routerLink="/booking/list" (click)="showUserMenu = false">My Bookings</a>
            @if (isLandlord() || isAdmin()) {
              <a routerLink="/profile/my-listings" (click)="showUserMenu = false">
                My Listings
              </a>
            }
            <div class="menu-divider"></div>
            <a routerLink="/service-offering/list" (click)="showUserMenu = false">Services</a>
            <a routerLink="/chat" (click)="showUserMenu = false">Messages</a>
            <div class="menu-divider"></div>
            <button (click)="logout()">Logout</button>
          } @else {
            <a routerLink="/auth/login" (click)="showUserMenu = false">
              <div class="font-semibold">Log in</div>
            </a>
            <a routerLink="/auth/register" (click)="showUserMenu = false">Sign up</a>
            <div class="menu-divider"></div>
            <a routerLink="/listing/search" (click)="showUserMenu = false">Browse Listings</a>
            <a routerLink="/service-offering/list" (click)="showUserMenu = false">Services</a>
          }

        </div>
      </div>
    </nav>
  </div>
</header>

<main class="main-content">
  <router-outlet></router-outlet>
</main>

<footer>
  <div class="footer-container">
    <p class="footer-text">&copy; 2025 StayEase, Inc. All rights reserved.</p>
    <div class="footer-links">
      <a href="#">Privacy</a>
      <span class="footer-divider">·</span>
      <a href="#">Terms</a>
      <span class="footer-divider">·</span>
      <a href="#">Sitemap</a>
      <span class="footer-divider">·</span>
      <a href="#">Company Details</a>
    </div>
  </div>
</footer>
